<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Home</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <link href="{{ url_for('static',filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='css/style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='css/app/chart.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='css/app/home.css') }}" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>

    </style>
</head>
<body style="width: 85%;margin: auto">

{# Head #}
<div class="container-fluid"
     style="padding: 30px 0px;">
    <div class="row">
        <div class="col-md-2">
            <img src="{{ url_for('static',filename='img/logo1.jpeg') }}" alt="My Home Logo" width="200" height="80"
                 class="DesktopHeader__Logo">
        </div>
        <div class="col-md-10">
            <h1>
                Selling OR Buying ! <small>Irish House Price Forecast</small>
            </h1>

            <ul class="nav" style="margin-top: 10px;font-size: 18px">
                <li class="nav-item">
                    <a class="nav-link" href="/home">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/go_to_scrape_data">Scrape data</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/go_to_clean_data">Clean data</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/go_to_predict">Prediction</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/monitor">Time series</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="rental_market">Rental market</a>
                </li>
                <li class="nav-item dropdown ml-md-auto">
                    <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink"
                       data-toggle="dropdown">Dropdown link</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another
                        action</a> <a class="dropdown-item" href="#">Something else here</a>
                        <div class="dropdown-divider">
                        </div>
                        <a class="dropdown-item" href="#">Separated link</a>
                    </div>
                </li>
            </ul>

        </div>
    </div>
</div>


<div class="container-fluid" style="">
    <div class="row">
        <div class="col-md-12">
            {#      data table      #}


        {#      The proportion of housing types.     #}
            <div class="row" style="border: 1px lightgrey solid;background: #f3f6f7;margin-top: 20px">
                <div class="col-md-3" style="margin: auto;text-align: center">
                    <h1>The proportion of housing types. </h1>
                </div>
                <div class="col-md-9">
                    <figure class="highcharts-figure">
                        <h1>The proportion of housing types. </h1>
                        <div id="type_percentage"></div>
                        <p class="highcharts-description">
                            This graph shows the percentage of bedrooms sold in Dublin.
                        </p>
                    </figure>
                </div>
            </div>

            {#      The distribution of rental areas     #}
            <div class="row" style="border: 1px lightgrey solid;background: #f3f6f7;margin-top: 20px">
                <div class="col-md-3" style="margin: auto;text-align: center">
                    <h1>The distribution of rental areas.</h1>
                </div>
                <div class="col-md-9">
                    <figure class="highcharts-figure">
                        <h1>The distribution of rental areas.</h1>
                        <div id="area_percentage"></div>
                        <p class="highcharts-description">
                            This graph shows the percentage of bedrooms sold in Dublin.
                        </p>
                    </figure>
                </div>
            </div>


            {#      The ratio of the number of bedrooms     #}
            <div class="row" style="border: 1px lightgrey solid;background: #f3f6f7;margin-top: 20px">
                <div class="col-md-3" style="margin: auto;text-align: center">
                    <h1>The ratio of the number of bedrooms</h1>
                </div>
                <div class="col-md-9">
                    <figure class="highcharts-figure">
                        <h1>The ratio of the number of bedrooms</h1>
                        <div id="bedroom_percentage"></div>
                        <p class="highcharts-description">
                            This graph shows the percentage of bedrooms sold in Dublin.
                        </p>
                    </figure>
                </div>
            </div>

            {#      The ratio of the number of bathrooms     #}
            <div class="row" style="border: 1px lightgrey solid;background: #f3f6f7;margin-top: 20px">
                <div class="col-md-3" style="margin: auto;text-align: center">
                    <h1>The ratio of the number of bathrooms </h1>
                </div>
                <div class="col-md-9">
                    <figure class="highcharts-figure">
                        <h1>The ratio of the number of bathrooms </h1>
                        <div id="bathroom_percentage"></div>
                        <p class="highcharts-description">
                            This graph shows the percentage of bedrooms sold in Dublin.
                        </p>
                    </figure>
                </div>
            </div>




        </div>
    </div>
    <input type="hidden" id="selected_city" value="">
</div>


<script src="{{ url_for('static',filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static',filename='js/bootstrap.min.js') }}"></script>
<script src=" {{ url_for('static',filename='js/scripts.js') }}"></script>
<script src=" {{ url_for('static',filename='js/app/mytable.js') }}"></script>
<script src=" {{ url_for('static',filename='js/app/mychart.js') }}"></script>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<script>
    // Radialize the colors
    Highcharts.setOptions({
        colors: Highcharts.map(Highcharts.getOptions().colors, function (color) {
            return {
                radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                },
                stops: [
                    [0, color],
                    [1, Highcharts.color(color).brighten(-0.3).get('rgb')] // darken
                ]
            };
        })
    });

    // Build the chart
    Highcharts.chart('type_percentage', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: 'Proportion of housing types in the rental market'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        accessibility: {
            point: {
                valueSuffix: '%'
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    connectorColor: 'silver'
                }
            }
        },
        series: [{
            name: 'Share',
            data: [
                {#{name: 'Internet Explorer', y: 11.84},#}
                {#{name: 'Firefox', y: 10.85},#}
                {#{name: 'Edge', y: 4.67},#}
                {#{name: 'Safari', y: 4.18},#}
                {#{name: 'Other', y: 7.05}#}

                {% for per in pie_data %}
                    {
                        name: '{{ per['type'] }}',
                        y: {{ per['percentage'] }},
                    },
                {% endfor %}
            ]
        }]

    });

    // Create the chart  (The distribution of rental areas)
    Highcharts.chart('area_percentage', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'The proportion of Area.'
        },
        subtitle: {
            text: ''
        },
        accessibility: {
            announceNewData: {
                enabled: true
            }
        },
        xAxis: {
            type: 'category'
        },
        yAxis: {
            title: {
                text: 'Total percent market share'
            }

        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                borderWidth: 0,
                dataLabels: {
                    enabled: true,
                    format: '{point.y:.1f}%'
                }
            }
        },

        tooltip: {
            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
        },

        series: [
            {
                name: "Area",
                colorByPoint: true,
                data: [

                    {% for per in area_percentage_data %}
                        {
                            name: '{{ per['type'] }}',
                            y: {{ per['percentage'] }},
                            drilldown: '{{ per['type'] }}'
                        },
                    {% endfor %}

                ]
            }
        ]

    });


    // Create the chart  (The ratio of the number of bedrooms)
    Highcharts.chart('bedroom_percentage', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: 'Proportion of housing types in the rental market'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        accessibility: {
            point: {
                valueSuffix: '%'
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    connectorColor: 'silver'
                }
            }
        },
        series: [{
            name: 'Share',
            data: [
                {% for per in bed_pie_data %}
                    {
                        name: '{{ per['type'] }}',
                        y: {{ per['percentage'] }},
                    },
                {% endfor %}
            ]
        }]

    });

    // Create the chart  (The ratio of the number of bathrooms.)
    Highcharts.chart('bathroom_percentage', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'The proportion of Bath.'
        },
        subtitle: {
            text: ''
        },
        accessibility: {
            announceNewData: {
                enabled: true
            }
        },
        xAxis: {
            type: 'category'
        },
        yAxis: {
            title: {
                text: 'Total percent market share'
            }

        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                borderWidth: 0,
                dataLabels: {
                    enabled: true,
                    format: '{point.y:.1f}%'
                }
            }
        },

        tooltip: {
            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
        },

        series: [
            {
                name: "Bath",
                colorByPoint: true,
                data: [

                    {% for per in bath_pie_data %}
                    {
                        name: '{{ per['type'] }}',
                        y: {{ per['percentage'] }},
                        drilldown:'{{ per['type'] }}'
                    },
                {% endfor %}

                ]
            }
        ]

    });
</script>
</body>
</html>
